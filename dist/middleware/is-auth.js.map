{"version":3,"sources":["../../src/middleware/is-auth.js"],"names":["module","exports","req","res","next","authHeader","get","isAuth","token","split","decodedToken","jwt","verify","process","env","JWT_KEY","err","userId"],"mappings":";;AAAA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAkB;AAE/B,MAAMC,UAAU,GAAGH,GAAG,CAACI,GAAJ,CAAQ,eAAR,CAAnB;;AACA,MAAI,CAACD,UAAL,EAAgB;AACZH,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACH;;AAED,MAAMI,KAAK,GAAIH,UAAU,CAACI,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAf;;AACA,MAAI,CAACD,KAAD,IAAUA,KAAK,KAAK,EAAxB,EAA2B;AACvBN,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACH;;AAED,MAAIM,YAAJ;;AAEA,MAAI;AACAA,IAAAA,YAAY,GAAGC,yBAAIC,MAAJ,CAAWJ,KAAX,EAAkBK,OAAO,CAACC,GAAR,CAAYC,OAA9B,CAAf;AACH,GAFD,CAEE,OAAOC,GAAP,EAAY;AACVd,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACH;;AAED,MAAI,CAACM,YAAL,EAAkB;AACdR,IAAAA,GAAG,CAACK,MAAJ,GAAa,KAAb;AACA,WAAOH,IAAI,EAAX;AACH;;AAEDF,EAAAA,GAAG,CAACK,MAAJ,GAAa,IAAb;AACAL,EAAAA,GAAG,CAACe,MAAJ,GAAaP,YAAY,CAACO,MAA1B;AACAb,EAAAA,IAAI;AACP,CA/BD","sourcesContent":["import jwt from \"jsonwebtoken\";\r\n\r\nmodule.exports = (req,res,next) => {\r\n\r\n    const authHeader = req.get('Authorization');\r\n    if (!authHeader){\r\n        req.isAuth = false;\r\n        return next();\r\n    }\r\n\r\n    const token =  authHeader.split(' ')[1];\r\n    if (!token || token === ''){\r\n        req.isAuth = false;\r\n        return next();\r\n    }\r\n\r\n    let decodedToken;\r\n\r\n    try {\r\n        decodedToken = jwt.verify(token, process.env.JWT_KEY);\r\n    } catch (err) {\r\n        req.isAuth = false;\r\n        return next();\r\n    }\r\n\r\n    if (!decodedToken){\r\n        req.isAuth = false;\r\n        return next();\r\n    }\r\n\r\n    req.isAuth = true;\r\n    req.userId = decodedToken.userId;\r\n    next();\r\n}"],"file":"is-auth.js"}